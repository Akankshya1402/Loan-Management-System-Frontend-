<div class="dashboard">

  <!-- STATS CARDS -->
  <div class="stats-grid">
    <div class="stat-card" *ngFor="let stat of stats">
      <div class="icon">{{ stat.icon }}</div>

      <div class="info">
        <p class="title">{{ stat.title }}</p>
        <h3 class="value">{{ stat.value }}</h3>
      </div>
    </div>
  </div>

  <!-- PAYMENT HISTORY -->
  <div class="section">
    <h3>Payment History</h3>

    <p *ngIf="loadingPayments">Loading payments...</p>

    <div class="payment-grid" *ngIf="!loadingPayments && payments.length">

      <div class="payment-card" *ngFor="let p of payments">
        <div class="payment-left">

          <div class="emi-badge">EMI {{ p.emiNumber }}</div>

          <!-- ✅ LOAN TYPE -->
          <div class="loan-type">
            {{ loanTypeMap[p.loanId] || 'Loan' }}
          </div>

          <div class="amount">₹{{ p.amount }}</div>

          <div class="date">
            {{ p.createdAt | date:'dd MMM yyyy' }}
          </div>
        </div>

        <div class="payment-right">
          <span class="status success">{{ p.status }}</span>
          <div class="txn">
            <span>Txn Ref</span>
            <small>{{ p.transactionRef }}</small>
          </div>
        </div>
      </div>

    </div>

    <p *ngIf="!loadingPayments && !payments.length">
      No payment history available.
    </p>
  </div>

</div>
