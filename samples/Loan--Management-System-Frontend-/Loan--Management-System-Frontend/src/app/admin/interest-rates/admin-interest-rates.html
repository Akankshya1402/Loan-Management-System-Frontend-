<div class="page">
  <h2>Loan Type Rates Management</h2>
  <p class="subtitle">
    Configure interest rates for different loan types
  </p>

  <div class="grid">

    <!-- LEFT: UPDATE FORM -->
    <div class="card">
      <h3>Update a Rate</h3>

      <label>Loan Type *</label>
      <select [(ngModel)]="selectedLoanType">
        <option value="">Select loan type</option>
        <option value="HOME">Home Loan</option>
        <option value="EDUCATION">Education</option>
        <option value="VEHICLE">Vehicle</option>
        <option value="PERSONAL">Personal</option>
      </select>

      <label>Interest Rate (%) *</label>
      <input
        type="number"
        step="0.1"
        min="0.1"
        [(ngModel)]="interestRate"
        placeholder="e.g. 8.5"
      />

      <!-- VALIDATION MESSAGE -->
      <small class="error"
        *ngIf="interestRate !== null && interestRate <= 0">
        Interest rate must be greater than 0
      </small>

      <button
        (click)="update()"
        [disabled]="!selectedLoanType || interestRate === null || interestRate <= 0">
        Update Rate
      </button>
    </div>

    <!-- RIGHT: CURRENT RATES -->
    <div class="card">
      <h3>Current Rates</h3>

      <table *ngIf="!loading">
        <thead>
          <tr>
            <th>Loan Type</th>
            <th>Interest Rate</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let r of rates">
            <td class="loan">
              ğŸ¦ {{ r.loanType }}
            </td>
            <td class="rate">
              {{ r.interestRate }}%
            </td>
            <td>
              <button class="icon" (click)="edit(r)">âœï¸</button>
            </td>
          </tr>
        </tbody>
      </table>

      <p *ngIf="loading">Loading rates...</p>
    </div>

  </div>
</div>
